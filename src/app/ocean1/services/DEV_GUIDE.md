# Ocean1 开发协作方案

## 角色分工

- **Billy** — 前端开发（页面设计、交互、动画）
- **瓜瓜 (sn9y)** — 后端开发（API 实现、数据库、服务器）+ 产品需求方

## 架构原理

前端和后端通过 **HTTP API** 通信，彼此完全解耦：

```
前端 (Next.js)                          后端 (服务器)
┌──────────────┐    HTTP Request     ┌──────────────┐
│  页面 / 按钮  │ ──────────────────→ │  API 接口     │
│              │ ←────────────────── │              │
└──────────────┘    JSON Response    └──────────────┘
```

- 后端只关心：**收到什么请求，返回什么数据**
- 后端不关心：请求从哪个页面发出、按钮长什么样、放在哪里
- 前端只关心：**调用哪个函数，拿到什么数据**
- 前端不关心：后端用什么语言、什么数据库

## 代码共享

我们使用同一个 GitHub repo：`work-with-sn9y`

```
work-with-sn9y/
├── src/app/ocean1/
│   ├── page.tsx              ← 登录页（Billy 开发）
│   ├── station/page.tsx      ← 主页（Billy 开发）
│   ├── test/page.tsx         ← 后端测试页（瓜瓜用）
│   └── services/
│       ├── types.ts          ← 接口类型定义（共用）
│       ├── api.ts            ← 前端 API 调用函数（共用）
│       └── API_README.md     ← 接口文档（瓜瓜看这个）
```

## 开发流程

### 瓜瓜的工作流

1. Clone repo：`git clone https://github.com/BillyAshlet/work-with-sn9y.git`
2. 安装依赖：`npm install`
3. 启动前端：`npm run dev` → 访问 `localhost:3000/ocean1/test`
4. 看 `API_README.md` 了解每个接口的请求/响应格式
5. 在自己的服务器上实现这些接口
6. 用测试页面验证接口是否正确
7. 也可以用 Postman / curl 直接测试，不依赖前端页面

### Billy 的工作流

1. 正常开发前端页面和设计
2. 需要调用后端时，从 `api.ts` import 对应函数即可
3. 页面排版、按钮位置随时可以改，不影响后端

### 同步方式

```bash
# 拉取对方的更新
git pull ocean1 main

# 推送自己的更新
git push ocean1 main
```

## 关键点

1. **测试页面和正式页面是等效的** — 都调用 `api.ts` 里同一套函数，后端收到的请求完全一样
2. **前端改排版不影响后端** — 按钮从 A 页面移到 B 页面，后端零改动
3. **后端改实现不影响前端** — 只要接口格式不变，前端零改动
4. **环境变量控制后端地址** — `.env` 里配置 `NEXT_PUBLIC_API_BASE_URL`，开发时指向本地，上线时指向正式服务器

## 接口总览

| 模块 | 接口数 | 说明 |
|------|--------|------|
| Auth | 5 | 登录、注册、验证码、设备验证、重置密码 |
| User | 2 | 心跳保活、余额/交易记录 |
| Pay | 1 | 卡密充值 |
| AI Gen | 5 | Sora视频、Banana图片、即梦视频/图片、轮询结果 |
| Cat | 1 | 猫猫AI对话 |

详细格式见 `API_README.md`。
